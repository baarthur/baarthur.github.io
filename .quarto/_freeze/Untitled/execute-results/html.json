{
  "hash": "d06a435781ec8e674f56b7ec86f18032",
  "result": {
    "markdown": "---\ntitle: \"Vinícius\"\nauthor: \"Arthur\"\ndate: \"2023-05-26\"\noutput: pdf_document\n---\n\n\nPrimeiro passo: carregar os pacotes necessários.\n\n\n\n\n# Exemplo\n\nCriando um exemplo reprodutível:\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_1 <- tibble(\n  Mosquitos = c(rep(\"muitos\",3), \"poucos\", \"muitos\", \"poucos\", \"nao\",  \"muitos\", rep(\"poucos\", 2)),\n  Resultado = c(\"negativo\", rep(\"positivo\", 2), rep(\"negativo\", 7))\n)\n```\n:::\n\n\nAgora, usamos as funções de tratamento do `{tidyverse}` para resumir os dados: `group_by()` para grupar por categoria das variáveis `x` (mosquitos) e `y` (resultado), depois para contar quantos casos há em cada $x \\cap y$. Usamos o operador pipe (`%>%`) para indicar primeiro o objeto e depois a função. Isso produz uma tabela com três colunas: `x`, `y` e `n`, o número em cada caso. \n\nComo queremos uma tabela de contingência, usamos `pivot_wider()` para transoformar os tipos de `y` (Resultado) em colunas, usando os valores da coluna `n`.\n\nDepois, é só passar as funções do `{kableExtra}`: `kbl()` cria a tabela, depois `kable_styling()` para especificar coisas de estilo, e `footnote()` se quiser uma nota de rodapé.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_1 %>% \n  group_by(Mosquitos, Resultado) %>% \n  count() %>% \n  pivot_wider(\n    names_from = Resultado,\n    values_from = n\n  ) %>% \n  replace_na(list(negativo = 0, positivo = 0)) %>% \n  kbl(\n    align = \"c\", # para centralizar\n    booktabs = T, # linhas superior, inferior etc\n    escape = F, # não entendi direito, mas parece que tem que ter!\n    caption = \"Mosquitos me mordam!\", # opcional também\n    col.names = c(\"Mosquitos\", \"Negativo\", \"Positivo\") # opcional: pode usar os nomes do dataframe\n  ) %>% \n  kable_styling(\n    latex_options = c(\"hold_position\"), # hold_position é pra ela ficar exatamente onde você quer, se necessário.\n    full_width = F, # para não ocupar a página toda (em largura)\n    position = \"center\" # para ficar no meio da página\n  ) %>% \n  footnote(\n    general = \"Fonte: Elaborado pelo autor.\",\n    general_title = \" \",\n    footnote_as_chunk = T\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;\">\n<caption>Mosquitos me mordam!</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Mosquitos </th>\n   <th style=\"text-align:center;\"> Negativo </th>\n   <th style=\"text-align:center;\"> Positivo </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> muitos </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> nao </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> poucos </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 0 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<span style=\"font-style: italic;\"> </span> <sup></sup> Fonte: Elaborado pelo autor.</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n\n\nEsse é o resultado, mas a função é muito customizável. Veja todas as opções aqui:\n\n* para `pdf`: http://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf\n* para `html`: https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html\n\n\n## Bônus:\nSupondo que desejamos trocar os \"nomes\" dos mosquitos:\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_1 %>% \n  group_by(Mosquitos, Resultado) %>% \n  count() %>% \n  pivot_wider(\n    names_from = Resultado,\n    values_from = n\n  ) %>% \n  replace_na(list(negativo = 0, positivo = 0)) %>% \n  mutate(\n    Mosquitos = str_replace(Mosquitos, \"muitos\", \"Muitos\"),\n    Mosquitos = str_replace(Mosquitos, \"nao\", \"Não\"),\n    Mosquitos = str_replace(Mosquitos, \"poucos\", \"Poucos\")\n    ) %>% \n  kbl(\n    align = \"c\", # para centralizar\n    booktabs = T, # linhas superior, inferior etc\n    escape = F, # não entendi direito, mas parece que tem que ter!\n    caption = \"Mosquitos me mordam!\", # opcional também\n    col.names = c(\"Mosquitos\", \"Negativo\", \"Positivo\") # opcional: pode usar os nomes do dataframe\n  ) %>% \n  kable_styling(\n    latex_options = c(\"hold_position\"), # hold_position é pra ela ficar exatamente onde você quer, se necessário.\n    full_width = F, # para não ocupar a página toda (em largura)\n    position = \"center\" # para ficar no meio da página\n  ) %>% \n  footnote(\n    general = \"Fonte: Elaborado pelo autor.\",\n    general_title = \" \",\n    footnote_as_chunk = T\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;\">\n<caption>Mosquitos me mordam!</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Mosquitos </th>\n   <th style=\"text-align:center;\"> Negativo </th>\n   <th style=\"text-align:center;\"> Positivo </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> Muitos </td>\n   <td style=\"text-align:center;\"> 3 </td>\n   <td style=\"text-align:center;\"> 2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> Não </td>\n   <td style=\"text-align:center;\"> 1 </td>\n   <td style=\"text-align:center;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> Poucos </td>\n   <td style=\"text-align:center;\"> 4 </td>\n   <td style=\"text-align:center;\"> 0 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<span style=\"font-style: italic;\"> </span> <sup></sup> Fonte: Elaborado pelo autor.</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}